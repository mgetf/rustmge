<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>mge.tf</title>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="//unpkg.com/axios"></script>
  </head>

  <body>
    <h1>mge.tf</h1>
    <div x-data="servers_req">
        <template x-if="data">
            <ul>
                <template x-for="server in data">
                    <li x-text="server.name"></li>
                </template>
            </ul>
        </template>
    </div>
    </template>

    <script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('servers_req', () => ({
            loading: true,
            data: null,
            error: null,

            init() { this.fetchDataFromServer(); },

            async fetchDataFromServer() {
                try {
                    const response = await axios.get('/api/servers');
                    this.data = response.data;
                } catch (error) {
                    this.error = 'Error fetching data';
                    console.error(error);
                } finally {
                    this.loading = false;
                }
            }
        }));
    });
    </script>
  </body>
</html>